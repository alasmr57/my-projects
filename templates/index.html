<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ğŸ¬ Ø£Ø¯Ø§Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      background: linear-gradient(135deg, #4facfe, #00f2fe);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      animation: gradientBG 8s ease infinite alternate;
      background-size: 200% 200%;
    }

    @keyframes gradientBG {
      from { background-position: left top; }
      to { background-position: right bottom; }
    }

    .card {
      border-radius: 20px;
      background: #fff;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      transition: transform 0.3s ease;
    }
    .card:hover {
      transform: translateY(-5px);
    }

    .btn-glow {
      border-radius: 12px;
      font-weight: bold;
      background: linear-gradient(90deg,#007bff,#00c6ff);
      border: none;
      color: #fff;
      transition: all 0.3s ease;
      box-shadow: 0 0 10px rgba(0, 198, 255, 0.7);
    }
    .btn-glow:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px rgba(0, 198, 255, 0.9);
    }

    .input-group input {
      border-radius: 12px;
    }

    .fade-in {
      animation: fadeIn 0.6s ease forwards;
    }
    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(10px);}
      to {opacity: 1; transform: translateY(0);}
    }

    .app-title {
      font-weight: 700;
      color: #007bff;
    }
  </style>
</head>
<body>

<div class="container">
  <div class="card p-5 text-center">
    <h2 class="app-title mb-3"><i class="bi bi-cloud-arrow-down-fill"></i> Ø£Ø¯Ø§Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</h2>
    <p class="text-muted mb-4">Ø£Ù„ØµÙ‚ Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù…Ù† <b>YouTube</b> Ø£Ùˆ <b>TikTok</b> Ù„ØªØ­Ù…ÙŠÙ„Ù‡ ÙÙˆØ±Ù‹Ø§ ğŸ¥</p>
    <div class="input-group mb-3">
      <input id="videoUrlInput" type="text" class="form-control" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù‡Ù†Ø§">
      <button class="btn btn-glow" onclick="downloadVideo()"><i class="bi bi-download"></i> ØªØ­Ù…ÙŠÙ„</button>
    </div>
    <div id="result" class="fade-in"></div>
  </div>
</div>

<script>
async function downloadVideo() {
  const input = document.getElementById("videoUrlInput").value.trim();
  const resultDiv = document.getElementById("result");
  if(!input){
    resultDiv.innerHTML = `<div class="alert alert-danger mt-3 fade-in">âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</div>`;
    return;
  }

  resultDiv.innerHTML = `<div class="alert alert-info mt-3 fade-in"><i class="bi bi-hourglass-split"></i> Ø¬Ø§Ø±ÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø±Ø§Ø¨Ø·...</div>`;

  try {
    const res = await fetch(`/download?url=${encodeURIComponent(input)}`);
    const data = await res.json();

    if(data.success){
      resultDiv.innerHTML = `
        <div class="alert alert-success mt-3 fade-in">
          <i class="bi bi-check-circle-fill"></i> ØªÙ… ØªØ¬Ù‡ÙŠØ² Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù„Ù„ØªØ­Ù…ÙŠÙ„ ğŸ‰<br>
          <a href="${data.url}" class="btn btn-success mt-3" download>
            <i class="bi bi-cloud-arrow-down"></i> Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ù„ØªÙ†Ø²ÙŠÙ„
          </a>
        </div>
      `;
    } else {
      resultDiv.innerHTML = `<div class="alert alert-danger mt-3 fade-in"><i class="bi bi-x-circle-fill"></i> ${data.error}</div>`;
    }
  } catch (e) {
    resultDiv.innerHTML = `<div class="alert alert-danger mt-3 fade-in">âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹: ${e}</div>`;
  }
}
</script>

</body>
</html>
